<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="mytheme">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>حاسبة مواد البناء</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/daisyui@5.0.9/dist/full.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap');
    
    body {
      font-family: 'Tajawal', sans-serif;
      background-color: #f8fafc;
      color: #000000;
    }
    
    .hero-bg {
      background-color: #1e40af;
      background-image: linear-gradient(135deg, #1e40af 0%, #3b82f6.50%, #1e3a8a 100%);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-fadeIn {
      animation: fadeIn 0.5s ease;
    }
    
    .input-group-addon {
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #1e40af;
      color: white;
      padding: 0 15px;
    }
    
    .input-group {
      display: flex;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .card {
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      transition: all 0.3s ease;
    }
    
    .card:hover {
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    
    /* تحسين أزرار التبويب */
    .calculator-tabs .btn {
      transition: all 0.3s ease;
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }
    
    .calculator-tabs .btn:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 0;
      height: 100%;
      background: rgba(255, 255, 255, 0.1);
      transition: all 0.4s ease;
      z-index: -1;
    }
    
    .calculator-tabs .btn:hover:before {
      width: 100%;
    }
    
    .calculator-tabs .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    
    .calculator-tabs .btn.btn-active {
      border-color: white;
    }
    
    /* تحسين أزرار الحساب */
    .calculator-btn {
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
      border: none;
      font-weight: 700;
      letter-spacing: 0.5px;
    }
    
    .calculator-btn:after {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      bottom: -50%;
      left: -50%;
      background: linear-gradient(to bottom, rgba(229, 172, 142, 0), rgba(255,255,255,0.5) 50%, rgba(229, 172, 142, 0));
      transform: rotate(45deg) translate(0, -100%);
      animation: shine 6s infinite linear;
    }
    
    @keyframes shine {
      0% {
        transform: rotate(45deg) translate(0, -150%);
      }
      100% {
        transform: rotate(45deg) translate(0, 150%);
      }
    }
    
    .calculator-btn:before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      border-radius: inherit;
      background: radial-gradient(circle at center, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0) 70%);
      opacity: 0;
      transition: opacity 0.5s;
      z-index: 1;
    }
    
    .calculator-btn:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 15px 25px -10px rgba(0, 0, 0, 0.3);
    }
    
    .calculator-btn:hover:before {
      opacity: 1;
    }
    
    .calculator-btn:active {
      transform: translateY(2px) scale(0.98);
      box-shadow: 0 5px 10px -5px rgba(0, 0, 0, 0.3);
    }
    
    .calculator-btn i {
      z-index: 2;
      position: relative;
    }
    
    /* تحسين أزرار إعادة التعيين */
    .reset-btn {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }
    
    .reset-btn:after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: transparent;
      z-index: -2;
    }
    
    .reset-btn:before {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0%;
      height: 100%;
      background-color: transparent;
      transition: all 0.3s;
      z-index: -1;
    }
    
    .reset-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    
    .reset-btn:active {
      transform: scale(0.98);
    }
    
    /* تحسين أزرار الطباعة */
    .print-btn {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .print-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
    }
    
    .print-btn:active {
      transform: scale(0.98);
    }
    
    /* تحسين ظهور النتائج */
    .result-appear {
      animation: resultAppear 0.5s ease-out;
    }
    
    @keyframes resultAppear {
      0% {
        opacity: 0;
        transform: scale(0.95);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    /* تحسين التجاوب مع الأجهزة المحمولة */
    @media (max-width: 768px) {
      .hero-bg h1 {
        font-size: 1.75rem;
      }
      
      .calculator-tabs .btn {
        font-size: 0.9rem;
        padding: 0.5rem 1rem;
      }
      
      .stat-value .text-6xl {
        font-size: 2.5rem;
      }
      
      .form-control label .label-text {
        font-size: 1rem;
      }
      
      .form-control input, .form-control select {
        font-size: 1rem;
      }
      
      .table {
        font-size: 0.9rem;
      }
      
      .grid-cols-1, .grid-cols-2 {
        gap: 1rem !important;
      }
      
      .card-body {
        padding: 1rem !important;
      }
      
      .container {
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
      }
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- Hero Section -->
  <div class="hero-bg text-white">
    <div class="container mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <a class="flex items-center gap-2 text-xl font-bold">
          <i class="fas fa-calculator text-white text-2xl"></i>
          حاسبة مواد البناء
        </a>
        <div class="badge badge-accent">الإصدار 2.2</div>
      </div>
      <div class="py-6 text-center">
        <h1 class="text-3xl font-bold mb-2">حاسبة مواد البناء</h1>
        <p class="text-white/90 max-w-xl mx-auto">
          أداة لحساب كمية مواد البناء المطلوبة بدقة عالية
        </p>
      </div>
    </div>
  </div>

  <!-- Tabs Section -->
  <div class="container mx-auto px-4 py-2">
    <div class="flex justify-center my-4 calculator-tabs">
      <div class="btn-group shadow-md">
        <button class="btn btn-lg px-8 gap-2 btn-active btn-primary" onclick="showCalculator('brickCalculator')">
          <i class="fas fa-th text-lg"></i>
          حاسبة الطابوق
        </button>
        <button class="btn btn-lg px-8 gap-2" onclick="showCalculator('tileCalculator')">
          <i class="fas fa-border-all text-lg"></i>
          حاسبة البلاط
        </button>
      </div>
    </div>
  </div>

  <div class="container mx-auto px-4 py-6">
    <!-- Calculators Container -->
    <div class="calculators-container">
      <!-- Brick Calculator Section -->
      <div id="brickCalculator" class="card bg-base-100">
      <div class="card-body">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Form Section -->
          <div class="p-4 rounded-xl">
            <div class="flex items-center justify-between mb-6">
              <h2 class="text-2xl font-bold text-secondary flex items-center">
                <i class="fas fa-sliders-h mr-2 text-primary"></i>
                بيانات الجدار
              </h2>
              <div class="badge badge-primary badge-lg p-3">املأ البيانات</div>
            </div>
            
            <div class="card bg-base-200 shadow-md hover:shadow-lg transition-all duration-300 mb-6">
              <div class="card-body p-5">
                <div class="form-control mb-5">
                  <label class="label">
                    <span class="label-text text-lg font-medium flex items-center">
                      <i class="fas fa-arrows-alt-h text-primary ml-2"></i>
                      طول الجدار (متر):
                    </span>
                  </label>
                  <div class="join w-full">
                    <div class="join-item bg-primary w-12 flex items-center justify-center">
                      <i class="fas fa-ruler-horizontal text-white"></i>
                    </div>
                    <input type="number" id="wallLength" min="0.1" step="0.1" placeholder="أدخل الطول بالمتر" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                  </div>
                </div>

                <div class="form-control mb-5">
                  <label class="label">
                    <span class="label-text text-lg font-medium flex items-center">
                      <i class="fas fa-arrows-alt-v text-primary ml-2"></i>
                      ارتفاع الجدار (متر):
                    </span>
                  </label>
                  <div class="join w-full">
                    <div class="join-item bg-primary w-12 flex items-center justify-center">
                      <i class="fas fa-ruler-vertical text-white"></i>
                    </div>
                    <input type="number" id="wallHeight" min="0.1" step="0.1" placeholder="أدخل الارتفاع بالمتر" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                  </div>
                </div>
              </div>
            </div>

            <div class="card bg-base-200 shadow-md hover:shadow-lg transition-all duration-300 mb-6">
              <div class="card-body p-5">
                <div class="form-control mb-5">
                  <label class="label">
                    <span class="label-text text-lg font-medium flex items-center">
                      <i class="fas fa-cubes text-primary ml-2"></i>
                      نوع الطابوق:
                    </span>
                  </label>
                  <div class="join w-full">
                    <div class="join-item bg-primary w-12 flex items-center justify-center">
                      <i class="fas fa-th text-white"></i>
                    </div>
                    <select id="brickType" class="select select-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary">
                      <option value="standard">طابوق قياسي (24×12×8 سم)</option>
                      <option value="hollow">طابوق مجوف (40×20×20 سم)</option>
                      <option value="concrete">بلوك خرساني (39×19×19 سم)</option>
                      <option value="thermal">طابوق حراري (30×20×15 سم)</option>
                    </select>
                  </div>
                </div>

                <div class="form-control mb-5">
                  <label class="label">
                    <span class="label-text text-lg font-medium flex items-center">
                      <i class="fas fa-chart-pie text-primary ml-2"></i>
                      نسبة الهدر (%):
                    </span>
                    <span class="label-text-alt badge badge-primary">يُنصح ب 10%</span>
                  </label>
                  <div class="join w-full">
                    <div class="join-item bg-primary w-12 flex items-center justify-center">
                      <i class="fas fa-percentage text-white"></i>
                    </div>
                    <input type="number" id="wastage" value="10" min="0" max="30" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                  </div>
                </div>

                <div class="form-control mb-5">
                  <label class="label">
                    <span class="label-text text-lg font-medium flex items-center">
                      <i class="fas fa-money-bill-wave text-primary ml-2"></i>
                      سعر الطابوق الواحد:
                    </span>
                    <span class="label-text-alt badge badge-accent">اختياري</span>
                  </label>
                  <div class="join w-full">
                    <div class="join-item bg-primary w-12 flex items-center justify-center">
                      <i class="fas fa-coins text-white"></i>
                    </div>
                    <input type="number" id="brickPrice" min="0" step="0.01" placeholder="أدخل السعر" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                  </div>
                </div>

                <div class="form-control mb-5">
                  <label class="label">
                    <span class="label-text text-lg font-medium flex items-center">
                      <i class="fas fa-cube text-primary ml-2"></i>
                      سعر كيس الأسمنت:
                    </span>
                    <span class="label-text-alt badge badge-accent">اختياري</span>
                  </label>
                  <div class="join w-full">
                    <div class="join-item bg-primary w-12 flex items-center justify-center">
                      <i class="fas fa-tag text-white"></i>
                    </div>
                    <input type="number" id="cementPrice" min="0" step="0.01" placeholder="أدخل سعر كيس الأسمنت" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                  </div>
                </div>
              </div>
            </div>

            <div class="card bg-accent/10 border border-accent shadow-md mt-8 mb-4">
              <div class="card-body p-4">
                <div class="grid grid-cols-1 gap-5">
                    <button onclick="calculateBricks()" class="btn calculator-btn btn-primary btn-lg btn-wide mx-auto text-lg gap-2 hover:scale-[1.02] transition-transform">
                    <i class="fas fa-calculator"></i>
                    حساب كمية الطابوق
                  </button>
                    <button onclick="resetForm()" class="btn reset-btn btn-outline btn-error btn-wide mx-auto text-lg gap-2">
                    <i class="fas fa-redo-alt"></i>
                    إعادة تعيين
                  </button>
                </div>
              </div>
            </div>
            
            <div id="error" class="alert alert-error mt-6 hidden">
              <i class="fas fa-exclamation-circle ml-2 text-lg"></i>
              <span id="errorMessage" class="text-lg"></span>
            </div>
          </div>
          
          <!-- Results Section -->
            <div id="result" class="bg-base-100 rounded-xl p-4 hidden animate-fadeIn result-appear">
            <h2 class="text-2xl font-bold text-secondary mb-6 flex items-center">
              <i class="fas fa-clipboard-list mr-2 text-primary"></i>
              نتائج الحساب
            </h2>
            
            <div class="overflow-x-auto">
              <table class="table table-zebra w-full border text-lg">
                <tbody>
                  <tr>
                    <td class="font-medium bg-base-200">
                      <div class="flex items-center">
                        <i class="fas fa-vector-square text-primary ml-2"></i>
                        مساحة الجدار:
                      </div>
                    </td>
                    <td class="text-primary font-bold"><span id="wallArea">0</span> متر مربع</td>
                  </tr>
                  <tr>
                    <td class="font-medium bg-base-200">
                      <div class="flex items-center">
                        <i class="fas fa-grip-lines text-primary ml-2"></i>
                        عدد الطابوق في الصف الواحد:
                      </div>
                    </td>
                    <td class="text-primary font-bold"><span id="bricksPerRow">0</span> قطعة</td>
                  </tr>
                  <tr>
                    <td class="font-medium bg-base-200">
                      <div class="flex items-center">
                        <i class="fas fa-layer-group text-primary ml-2"></i>
                        عدد الصفوف:
                      </div>
                    </td>
                    <td class="text-primary font-bold"><span id="rows">0</span> صف</td>
                  </tr>
                  <tr>
                    <td class="font-medium bg-base-200">
                      <div class="flex items-center">
                        <i class="fas fa-th text-primary ml-2"></i>
                        إجمالي عدد الطابوق (بدون هدر):
                      </div>
                    </td>
                    <td class="text-primary font-bold"><span id="totalBricks">0</span> قطعة</td>
                  </tr>
                  <tr>
                    <td class="font-medium bg-base-200">
                      <div class="flex items-center">
                        <i class="fas fa-plus-circle text-primary ml-2"></i>
                        كمية الهدر المضافة (<span id="wastagePercentage">10</span>%):
                      </div>
                    </td>
                    <td class="text-primary font-bold"><span id="wastageAmount">0</span> قطعة</td>
                  </tr>
                  <tr>
                    <td class="font-medium bg-base-200">
                      <div class="flex items-center">
                        <i class="fas fa-calculator text-primary ml-2"></i>
                        معدل الطابوق لكل متر مربع:
                      </div>
                    </td>
                    <td class="text-primary font-bold"><span id="bricksPerSqm">0</span> قطعة/م²</td>
                  </tr>
                  <tr id="costRow" class="hidden">
                    <td class="font-medium bg-base-200">
                      <div class="flex items-center">
                        <i class="fas fa-money-bill-wave text-primary ml-2"></i>
                        التكلفة التقديرية:
                      </div>
                    </td>
                    <td class="text-primary font-bold"><span id="totalCost">0</span></td>
                  </tr>
                  <tr id="cementCostRow" class="hidden">
                    <td class="font-medium bg-base-200">
                      <div class="flex items-center">
                        <i class="fas fa-cube text-primary ml-2"></i>
                        تكلفة الأسمنت:
                      </div>
                    </td>
                    <td class="text-primary font-bold"><span id="cementCost">0</span> درهم</td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div class="divider mt-6">المواد المطلوبة للبناء</div>
            <div class="overflow-x-auto">
              <table class="table table-zebra w-full">
                <tbody>
                  <tr>
                    <td class="font-medium bg-base-200">
                      <div class="flex items-center">
                        <i class="fas fa-cube text-primary ml-2"></i>
                        كمية الأسمنت المطلوبة:
                      </div>
                    </td>
                    <td class="text-primary font-bold">
                      <span id="cementBags">0</span> كيس
                    </td>
                  </tr>
                  <tr>
                    <td class="font-medium bg-base-200">
                      <div class="flex items-center">
                        <i class="fas fa-mountain text-primary ml-2"></i>
                        كمية الرمل المطلوبة:
                      </div>
                    </td>
                    <td class="text-primary font-bold">
                      <span id="sandAmount">0</span> متر مكعب
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div class="stats shadow-lg mt-6 w-full bg-gradient-to-br from-primary to-accent rounded-2xl border-4 border-base-300">
              <div class="stat place-items-center p-6 bg-white/95 backdrop-blur-sm">
                <div class="stat-title text-xl font-bold text-primary">إجمالي عدد الطابوق المطلوب</div>
                <div class="stat-value py-4 flex items-center justify-center">
                  <div class="relative">
                    <div class="absolute inset-0 bg-accent/20 rounded-xl blur-md"></div>
                    <div class="relative z-10 bg-base-100 shadow-inner border-2 border-accent rounded-xl px-8 py-3">
                      <span id="totalWithWastage" class="text-6xl font-black text-primary">0</span>
                    </div>
                  </div>
                </div>
                <div class="stat-desc badge badge-lg badge-primary text-xl font-bold mt-2 py-3 px-4">قطعة</div>
              </div>
            </div>
            
            <div class="alert alert-info mt-6">
              <div class="flex items-center">
                <i class="fas fa-lightbulb ml-2 text-lg"></i>
                <div class="text-lg">
                  <p>إذا كان لديك مساحة <span id="wallAreaTip">0</span> متر مربع، فستحتاج إلى <span id="totalWithWastageTip">0</span> قطعة من الطابوق لإكمال البناء.</p>
                </div>
              </div>
            </div>
            
              <button onclick="printResults()" class="btn print-btn btn-accent btn-wide mx-auto mt-6 text-lg">
              <i class="fas fa-print ml-2"></i>
              طباعة النتائج
            </button>
          </div>
          
        </div>
      </div>
    </div>
    
      <!-- Tile Calculator Section -->
      <div id="tileCalculator" class="card bg-base-100 hidden">
        <div class="card-body">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Form Section -->
            <div class="p-4 rounded-xl">
              <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-secondary flex items-center">
                  <i class="fas fa-border-all mr-2 text-primary"></i>
                  بيانات الغرفة
                </h2>
                <div class="badge badge-primary badge-lg p-3">املأ البيانات</div>
              </div>
              
              <div class="card bg-base-200 shadow-md hover:shadow-lg transition-all duration-300 mb-6">
                <div class="card-body p-5">
                  <div class="form-control mb-5">
                    <label class="label">
                      <span class="label-text text-lg font-medium flex items-center">
                        <i class="fas fa-arrows-alt-h text-primary ml-2"></i>
                        طول الغرفة (متر):
                      </span>
                    </label>
                    <div class="join w-full">
                      <div class="join-item bg-primary w-12 flex items-center justify-center">
                        <i class="fas fa-ruler-horizontal text-white"></i>
                      </div>
                      <input type="number" id="roomLength" min="0.1" step="0.1" placeholder="أدخل الطول بالمتر" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                    </div>
                  </div>

                  <div class="form-control mb-5">
                    <label class="label">
                      <span class="label-text text-lg font-medium flex items-center">
                        <i class="fas fa-arrows-alt-v text-primary ml-2"></i>
                        عرض الغرفة (متر):
                      </span>
                    </label>
                    <div class="join w-full">
                      <div class="join-item bg-primary w-12 flex items-center justify-center">
                        <i class="fas fa-ruler-vertical text-white"></i>
                      </div>
                      <input type="number" id="roomWidth" min="0.1" step="0.1" placeholder="أدخل العرض بالمتر" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                    </div>
                  </div>
                </div>
              </div>

              <div class="card bg-base-200 shadow-md hover:shadow-lg transition-all duration-300 mb-6">
                <div class="card-body p-5">
                  <div class="form-control mb-5">
                    <label class="label">
                      <span class="label-text text-lg font-medium flex items-center">
                        <i class="fas fa-th-large text-primary ml-2"></i>
                        نوع البلاط:
                      </span>
                    </label>
                    <div class="join w-full">
                      <div class="join-item bg-primary w-12 flex items-center justify-center">
                        <i class="fas fa-th-large text-white"></i>
                      </div>
                      <select id="tileType" class="select select-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" onchange="updateTileSizes()">
                        <option value="ceramic">سيراميك</option>
                        <option value="porcelain">بورسلين</option>
                        <option value="marble">رخام</option>
                        <option value="granite">جرانيت</option>
                        <option value="mosaic">موزاييك</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-control mb-5">
                    <label class="label">
                      <span class="label-text text-lg font-medium flex items-center">
                        <i class="fas fa-expand-arrows-alt text-primary ml-2"></i>
                        حجم البلاط:
                      </span>
                    </label>
                    <div class="join w-full">
                      <div class="join-item bg-primary w-12 flex items-center justify-center">
                        <i class="fas fa-vector-square text-white"></i>
                      </div>
                      <select id="tileSize" class="select select-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" onchange="handleTileSizeChange()">
                        <option value="custom">مقاس مخصص</option>
                      </select>
                    </div>
                  </div>

                  <div id="customSizeFields" class="hidden">
                    <div class="form-control mb-5">
                      <label class="label">
                        <span class="label-text text-lg font-medium flex items-center">
                          <i class="fas fa-arrows-alt-h text-primary ml-2"></i>
                          عرض البلاطة (سم):
                        </span>
                      </label>
                      <div class="join w-full">
                        <div class="join-item bg-primary w-12 flex items-center justify-center">
                          <i class="fas fa-ruler-horizontal text-white"></i>
                        </div>
                        <input type="number" id="customWidth" min="1" step="1" placeholder="أدخل العرض" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                      </div>
                    </div>

                    <div class="form-control mb-5">
                      <label class="label">
                        <span class="label-text text-lg font-medium flex items-center">
                          <i class="fas fa-arrows-alt-v text-primary ml-2"></i>
                          طول البلاطة (سم):
                        </span>
                      </label>
                      <div class="join w-full">
                        <div class="join-item bg-primary w-12 flex items-center justify-center">
                          <i class="fas fa-ruler-vertical text-white"></i>
                        </div>
                        <input type="number" id="customHeight" min="1" step="1" placeholder="أدخل الطول" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                      </div>
                    </div>

                    <div class="form-control mb-5">
                      <label class="label">
                        <span class="label-text text-lg font-medium flex items-center">
                          <i class="fas fa-boxes text-primary ml-2"></i>
                          عدد القطع في العبوة:
                        </span>
                        <span class="label-text-alt badge badge-accent">اختياري</span>
                      </label>
                      <div class="join w-full">
                        <div class="join-item bg-primary w-12 flex items-center justify-center">
                          <i class="fas fa-box text-white"></i>
                        </div>
                        <input type="number" id="customTilesPerBox" min="1" step="1" placeholder="أدخل عدد القطع (اختياري)" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                      </div>
                    </div>
                  </div>

                  <div class="form-control mb-5">
                    <label class="label">
                      <span class="label-text text-lg font-medium flex items-center">
                        <i class="fas fa-directions text-primary ml-2"></i>
                        اتجاه التركيب:
                      </span>
                    </label>
                    <div class="join w-full">
                      <div class="join-item bg-primary w-12 flex items-center justify-center">
                        <i class="fas fa-random text-white"></i>
                      </div>
                      <select id="tilePattern" class="select select-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary">
                        <option value="straight">عادي (متوازي)</option>
                        <option value="diagonal">قطري (45 درجة)</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-control mb-5">
                    <label class="label">
                      <span class="label-text text-lg font-medium flex items-center">
                        <i class="fas fa-chart-pie text-primary ml-2"></i>
                        نسبة الهدر (%):
                      </span>
                      <span class="label-text-alt badge badge-primary">يُنصح ب 10%</span>
                    </label>
                    <div class="join w-full">
                      <div class="join-item bg-primary w-12 flex items-center justify-center">
                        <i class="fas fa-percentage text-white"></i>
                      </div>
                      <input type="number" id="tileWastage" value="10" min="0" max="30" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                    </div>
                  </div>

                  <div class="form-control mb-5">
                    <label class="label">
                      <span class="label-text text-lg font-medium flex items-center">
                        <i class="fas fa-money-bill-wave text-primary ml-2"></i>
                        سعر المتر المربع (درهم):
                      </span>
                      <span class="label-text-alt badge badge-accent">اختياري</span>
                    </label>
                    <div class="join w-full">
                      <div class="join-item bg-primary w-12 flex items-center justify-center">
                        <i class="fas fa-coins text-white"></i>
                      </div>
                      <input type="number" id="tilePrice" min="0" step="0.01" placeholder="أدخل السعر" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" />
                    </div>
                  </div>

                  <div class="form-control mb-5">
                    <label class="label">
                      <span class="label-text text-lg font-medium flex items-center">
                        <i class="fas fa-paint-roller text-primary ml-2"></i>
                        سعر كيس اللاصق (درهم):
                      </span>
                      <span class="label-text-alt badge badge-accent">اختياري</span>
                    </label>
                    <div class="join w-full">
                      <div class="join-item bg-primary w-12 flex items-center justify-center">
                        <i class="fas fa-tag text-white"></i>
                      </div>
                      <input type="number" id="adhesivePrice" min="0" step="0.01" placeholder="أدخل سعر كيس اللاصق" class="input input-bordered join-item w-full text-lg focus:ring-2 focus:ring-primary" oninput="updateAdhesiveCost()" />
                    </div>
                  </div>
                </div>
              </div>

              <div class="card bg-accent/10 border border-accent shadow-md mt-8 mb-4">
                <div class="card-body p-4">
                  <div class="grid grid-cols-1 gap-5">
                    <button onclick="calculateTiles()" class="btn calculator-btn btn-primary btn-lg btn-wide mx-auto text-lg gap-2 hover:scale-[1.02] transition-transform">
                      <i class="fas fa-calculator"></i>
                      حساب كمية البلاط
                    </button>
                    <button onclick="resetTileForm()" class="btn reset-btn btn-outline btn-error btn-wide mx-auto text-lg gap-2">
                      <i class="fas fa-redo-alt"></i>
                      إعادة تعيين
                    </button>
                  </div>
                </div>
              </div>
              
              <div id="tileError" class="alert alert-error mt-6 hidden">
                <i class="fas fa-exclamation-circle ml-2 text-lg"></i>
                <span id="tileErrorMessage" class="text-lg"></span>
              </div>
            </div>
            
            <!-- Results Section -->
            <div id="tileResult" class="bg-base-100 rounded-xl p-4 hidden animate-fadeIn result-appear">
              <h2 class="text-2xl font-bold text-secondary mb-6 flex items-center">
                <i class="fas fa-clipboard-list mr-2 text-primary"></i>
                نتائج الحساب
              </h2>
              
              <div class="overflow-x-auto">
                <table class="table table-zebra w-full border text-lg">
                  <tbody>
                    <tr>
                      <td class="font-medium bg-base-200">
                        <div class="flex items-center">
                          <i class="fas fa-vector-square text-primary ml-2"></i>
                          مساحة الغرفة:
                        </div>
                      </td>
                      <td class="text-primary font-bold"><span id="roomArea">0</span> متر مربع</td>
                    </tr>
                    <tr>
                      <td class="font-medium bg-base-200">
                        <div class="flex items-center">
                          <i class="fas fa-th-large text-primary ml-2"></i>
                          مساحة البلاطة الواحدة:
                        </div>
                      </td>
                      <td class="text-primary font-bold"><span id="tileArea">0</span> متر مربع</td>
                    </tr>
                    <tr>
                      <td class="font-medium bg-base-200">
                        <div class="flex items-center">
                          <i class="fas fa-calculator text-primary ml-2"></i>
                          عدد البلاط المطلوب (بدون هدر):
                        </div>
                      </td>
                      <td class="text-primary font-bold"><span id="totalTiles">0</span> قطعة</td>
                    </tr>
                    <tr>
                      <td class="font-medium bg-base-200">
                        <div class="flex items-center">
                          <i class="fas fa-plus-circle text-primary ml-2"></i>
                          كمية الهدر المضافة (<span id="tileWastagePercentage">10</span>%):
                        </div>
                      </td>
                      <td class="text-primary font-bold"><span id="tileWastageAmount">0</span> قطعة</td>
                    </tr>
                    <tr id="boxesNeededRow" class="hidden">
                      <td class="font-medium bg-base-200">
                        <div class="flex items-center">
                          <i class="fas fa-boxes text-primary ml-2"></i>
                          عدد العبوات المطلوبة:
                        </div>
                      </td>
                      <td class="text-primary font-bold" id="boxesRow">
                        <span id="boxesNeeded">-</span>
                        <span id="boxesInfo">عبوة (<span id="tilesPerBox">0</span> قطعة/عبوة)</span>
                      </td>
                    </tr>
                    <tr id="tileCostRow" class="hidden">
                      <td class="font-medium bg-base-200">
                        <div class="flex items-center">
                          <i class="fas fa-money-bill-wave text-primary ml-2"></i>
                          التكلفة التقديرية:
                        </div>
                      </td>
                      <td class="text-primary font-bold"><span id="totalTileCost">0</span> درهم</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              
              <div class="divider mt-6">المواد المطلوبة للتركيب</div>
              <div class="overflow-x-auto">
                <table class="table table-zebra w-full">
                  <tbody>
                    <tr>
                      <td class="font-medium bg-base-200">
                        <div class="flex items-center">
                          <i class="fas fa-paint-roller text-primary ml-2"></i>
                          كمية اللاصق المطلوبة:
                        </div>
                      </td>
                      <td class="text-primary font-bold">
                        <span id="adhesiveBags">0</span> كيس
                      </td>
                    </tr>
                    <tr id="adhesiveCostRow" class="hidden">
                      <td class="font-medium bg-base-200">
                        <div class="flex items-center">
                          <i class="fas fa-coins text-primary ml-2"></i>
                          تكلفة اللاصق:
                        </div>
                      </td>
                      <td class="text-primary font-bold">
                        <span id="adhesiveCost">0</span> درهم
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              
              <div class="stats shadow-lg mt-6 w-full bg-gradient-to-br from-primary to-accent rounded-2xl border-4 border-base-300">
                <div class="stat place-items-center p-6 bg-white/95 backdrop-blur-sm">
                  <div class="stat-title text-xl font-bold text-primary">إجمالي عدد البلاط المطلوب</div>
                  <div class="stat-value py-4 flex items-center justify-center">
                    <div class="relative">
                      <div class="absolute inset-0 bg-accent/20 rounded-xl blur-md"></div>
                      <div class="relative z-10 bg-base-100 shadow-inner border-2 border-accent rounded-xl px-8 py-3">
                        <span id="totalWithTileWastage" class="text-6xl font-black text-primary">0</span>
                      </div>
                    </div>
                  </div>
                  <div class="stat-desc badge badge-lg badge-primary text-xl font-bold mt-2 py-3 px-4">قطعة</div>
                </div>
              </div>
              
              <div class="alert alert-info mt-6">
                <div class="flex items-center">
                  <i class="fas fa-lightbulb ml-2 text-lg"></i>
                  <div class="text-lg">
                    <p>لتبليط مساحة <span id="roomAreaTip">0</span> متر مربع، ستحتاج إلى <span id="totalWithTileWastageTip">0</span> قطعة من البلاط.</p>
                  </div>
                </div>
              </div>
              
              <button onclick="printTileResults()" class="btn print-btn btn-accent btn-wide mx-auto mt-6 text-lg">
                <i class="fas fa-print ml-2"></i>
                طباعة النتائج
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Global Footer - always visible -->
    <footer class="footer footer-center p-8 bg-base-100 text-base-content mt-12 shadow-md rounded-lg">
      <div>
        <p class="text-lg">حاسبة مواد البناء © 2023 | جميع الحقوق محفوظة</p>
      </div>
    </footer>
  </div>

  <script>
    // أنواع الطابوق المتاحة
    const BRICK_TYPES = {
      standard: {
        name: 'طابوق قياسي',
        dimensions: { length: 24, width: 12, height: 8 }, // بالسنتيمتر
        mortar: 1.5, // سماكة المونة بالسنتيمتر
      },
      hollow: {
        name: 'طابوق مجوف',
        dimensions: { length: 40, width: 20, height: 20 },
        mortar: 2,
      },
      concrete: {
        name: 'بلوك خرساني',
        dimensions: { length: 39, width: 19, height: 19 },
        mortar: 2,
      },
      thermal: {
        name: 'طابوق حراري',
        dimensions: { length: 30, width: 20, height: 15 },
        mortar: 1.5,
      }
    };

    // أنواع البلاط ومواصفاتها
    const TILE_TYPES = {
      ceramic: {
        name: 'سيراميك',
        sizes: {
          '25x25': { width: 25, height: 25, tilesPerBox: 16 },
          '30x30': { width: 30, height: 30, tilesPerBox: 11 },
          '40x40': { width: 40, height: 40, tilesPerBox: 6 },
          '60x60': { width: 60, height: 60, tilesPerBox: 4 },
          '80x80': { width: 80, height: 80, tilesPerBox: 3 }
        }
      },
      porcelain: {
        name: 'بورسلين',
        sizes: {
          '60x60': { width: 60, height: 60, tilesPerBox: 4 },
          '80x80': { width: 80, height: 80, tilesPerBox: 3 },
          '120x60': { width: 120, height: 60, tilesPerBox: 2 },
          '120x120': { width: 120, height: 120, tilesPerBox: 1 }
        }
      },
      marble: {
        name: 'رخام',
        sizes: {
          '60x60': { width: 60, height: 60, tilesPerBox: 4 },
          '80x80': { width: 80, height: 80, tilesPerBox: 2 },
          '100x100': { width: 100, height: 100, tilesPerBox: 1 },
          '120x120': { width: 120, height: 120, tilesPerBox: 1 }
        }
      },
      granite: {
        name: 'جرانيت',
        sizes: {
          '60x60': { width: 60, height: 60, tilesPerBox: 4 },
          '80x80': { width: 80, height: 80, tilesPerBox: 2 },
          '100x100': { width: 100, height: 100, tilesPerBox: 1 },
          '120x120': { width: 120, height: 120, tilesPerBox: 1 }
        }
      },
      mosaic: {
        name: 'موزاييك',
        sizes: {
          '25x25': { width: 25, height: 25, tilesPerBox: 16 },
          '30x30': { width: 30, height: 30, tilesPerBox: 11 },
          '40x40': { width: 40, height: 40, tilesPerBox: 6 },
          '50x50': { width: 50, height: 50, tilesPerBox: 4 }
        }
      }
    };

    // التبديل بين الحاسبات
    function showCalculator(calculatorId) {
      // تحديث حالة التبويبات
      document.querySelectorAll('.btn-group .btn').forEach(tab => {
        tab.classList.remove('btn-active', 'btn-primary');
      });
      
      // إخفاء جميع الحاسبات مع تأثير انتقالي
      document.querySelectorAll('.calculators-container > div').forEach(calculator => {
        calculator.classList.add('hidden');
        calculator.classList.remove('result-appear');
      });
      
      // إظهار الحاسبة المطلوبة مع تأثير انتقالي
      const selectedCalculator = document.getElementById(calculatorId);
      selectedCalculator.classList.remove('hidden');
      // تطبيق التأثير بعد إزالة الإخفاء بوقت قصير ليعمل بشكل صحيح
      setTimeout(() => {
        selectedCalculator.classList.add('result-appear');
      }, 10);
      
      // تحديد التبويب النشط
      if (calculatorId === 'brickCalculator') {
        document.querySelector('.btn-group .btn:nth-child(1)').classList.add('btn-active', 'btn-primary');
      } else {
        document.querySelector('.btn-group .btn:nth-child(2)').classList.add('btn-active', 'btn-primary');
      }
    }

    // معالجة تغيير حجم البلاط
    function handleTileSizeChange() {
      console.log('handleTileSizeChange called');
      const tileSizeSelect = document.getElementById('tileSize');
      const customSizeFields = document.getElementById('customSizeFields');
      
      // إظهار أو إخفاء حقول المقاس المخصص
      if (tileSizeSelect.value === 'custom') {
        console.log('Showing custom fields');
        customSizeFields.classList.remove('hidden');
        // تفريغ الحقول المخصصة
        document.getElementById('customWidth').value = '';
        document.getElementById('customHeight').value = '';
        document.getElementById('customTilesPerBox').value = '';
      } else {
        console.log('Hiding custom fields');
        customSizeFields.classList.add('hidden');
      }
    }

    // تحديث أحجام البلاط بناءً على النوع المختار
    function updateTileSizes() {
      console.log('updateTileSizes called');
      const tileType = document.getElementById('tileType').value;
      const tileSizeSelect = document.getElementById('tileSize');
      const customSizeFields = document.getElementById('customSizeFields');
      
      // إفراغ القائمة
      tileSizeSelect.innerHTML = '';
      
      // إضافة خيار المقاس المخصص أولاً
      const customOption = document.createElement('option');
      customOption.value = 'custom';
      customOption.textContent = 'مقاس مخصص';
      tileSizeSelect.appendChild(customOption);
      
      // إضافة الأحجام المتاحة للنوع المختار
      const sizes = TILE_TYPES[tileType].sizes;
      Object.keys(sizes).forEach(sizeKey => {
        const size = sizes[sizeKey];
        const option = document.createElement('option');
        option.value = sizeKey;
        option.textContent = `${size.width} × ${size.height} سم`;
        tileSizeSelect.appendChild(option);
      });

      // اختيار أول خيار غير مخصص إذا كان متاحاً
      if (Object.keys(sizes).length > 0) {
        tileSizeSelect.value = Object.keys(sizes)[0];
        customSizeFields.classList.add('hidden');
      } else {
        tileSizeSelect.value = 'custom';
        customSizeFields.classList.remove('hidden');
      }
    }

    // حساب كمية البلاط
    function calculateTiles() {
      // إخفاء النتائج ورسائل الخطأ السابقة
      document.getElementById('tileError').classList.add('hidden');
      document.getElementById('tileResult').classList.add('hidden');
      
      // استلام المدخلات
      const roomLengthInput = document.getElementById('roomLength').value;
      const roomWidthInput = document.getElementById('roomWidth').value;
      const tileTypeId = document.getElementById('tileType').value;
      const tileSizeId = document.getElementById('tileSize').value;
      const tilePattern = document.getElementById('tilePattern').value;
      const wastagePercentage = parseInt(document.getElementById('tileWastage').value) || 10;
      const tilePrice = parseFloat(document.getElementById('tilePrice').value) || 0;
      const adhesivePrice = parseFloat(document.getElementById('adhesivePrice').value) || 0;
      
      // التحقق من المدخلات
      if (!roomLengthInput || !roomWidthInput) {
        showTileError('الرجاء إدخال طول وعرض الغرفة');
        return;
      }
      
      const roomLength = parseFloat(roomLengthInput);
      const roomWidth = parseFloat(roomWidthInput);
      
      if (isNaN(roomLength) || isNaN(roomWidth) || roomLength <= 0 || roomWidth <= 0) {
        showTileError('الرجاء إدخال أرقام صحيحة موجبة للأبعاد');
        return;
      }
      
      // الحصول على معلومات البلاط
      let tileSize;
      if (tileSizeId === 'custom') {
        const customWidth = parseFloat(document.getElementById('customWidth').value);
        const customHeight = parseFloat(document.getElementById('customHeight').value);
        const customTilesPerBox = parseInt(document.getElementById('customTilesPerBox').value) || null;
        
        if (isNaN(customWidth) || isNaN(customHeight) || 
            customWidth <= 0 || customHeight <= 0) {
          showTileError('الرجاء إدخال أبعاد صحيحة للمقاس المخصص');
          return;
        }
        
        if (customTilesPerBox !== null && customTilesPerBox <= 0) {
          showTileError('الرجاء إدخال عدد صحيح موجب للقطع في العبوة');
          return;
        }
        
        tileSize = {
          width: customWidth,
          height: customHeight,
          tilesPerBox: customTilesPerBox
        };
      } else {
        const tileType = TILE_TYPES[tileTypeId];
        if (!tileType) {
          showTileError('نوع البلاط غير صحيح');
          return;
        }
        
        tileSize = tileType.sizes[tileSizeId];
        if (!tileSize) {
          showTileError('حجم البلاط غير متوفر');
          return;
        }
      }
      
      // حساب مساحة الغرفة والبلاطة
      const roomAreaSqm = (roomLength * roomWidth).toFixed(2);
      const tileWidthM = tileSize.width / 100; // تحويل من سم إلى متر
      const tileHeightM = tileSize.height / 100; // تحويل من سم إلى متر
      const tileAreaSqm = (tileWidthM * tileHeightM).toFixed(4);
      
      // حساب عدد البلاط المطلوب
      let tilesNeeded;
      
      if (tilePattern === 'straight') {
        // الحساب العادي (المستقيم)
        tilesNeeded = Math.ceil(roomAreaSqm / tileAreaSqm);
      } else {
        // الحساب القطري (يضيف 10% كمية إضافية بسبب القص)
        tilesNeeded = Math.ceil(roomAreaSqm / tileAreaSqm * 1.1);
      }
      
      // إضافة نسبة الهدر
      const wastageAmount = Math.ceil(tilesNeeded * (wastagePercentage / 100));
      const totalWithWastage = tilesNeeded + wastageAmount;
      
      // حساب عدد العبوات
      const tilesPerBox = tileSize.tilesPerBox || parseInt(document.getElementById('customTilesPerBox').value) || null;
      const boxesNeeded = tilesPerBox ? Math.ceil(totalWithWastage / tilesPerBox) : null;
      
      // حساب التكلفة إذا تم إدخال السعر
      const tileCostRow = document.getElementById('tileCostRow');
      if (tilePrice > 0) {
        const totalCost = (roomAreaSqm * tilePrice).toFixed(2);
        document.getElementById('totalTileCost').textContent = totalCost;
        tileCostRow.classList.remove('hidden');
      } else {
        tileCostRow.classList.add('hidden');
      }

      // حساب كمية اللاصق وتكلفته
      const adhesiveBags = calculateAdhesive(tileSize, parseFloat(roomAreaSqm));
      document.getElementById('adhesiveBags').textContent = adhesiveBags;

      const adhesiveCostRow = document.getElementById('adhesiveCostRow');
      if (adhesivePrice > 0) {
        const adhesiveCost = (adhesiveBags * adhesivePrice).toFixed(2);
        document.getElementById('adhesiveCost').textContent = adhesiveCost;
        adhesiveCostRow.classList.remove('hidden');
      } else {
        adhesiveCostRow.classList.add('hidden');
      }
      
      // عرض النتائج
      document.getElementById('roomArea').textContent = roomAreaSqm;
      document.getElementById('tileArea').textContent = tileAreaSqm;
      document.getElementById('totalTiles').textContent = tilesNeeded;
      document.getElementById('tileWastagePercentage').textContent = wastagePercentage;
      document.getElementById('tileWastageAmount').textContent = wastageAmount;
      document.getElementById('totalWithTileWastage').textContent = totalWithWastage;
      
      // تحديث عرض عدد العبوات
      const boxesNeededRow = document.getElementById('boxesNeededRow');
      const boxesElement = document.getElementById('boxesNeeded');
      const tilesPerBoxElement = document.getElementById('tilesPerBox');
      
      if (tilesPerBox && tilesPerBox > 0) {
        boxesElement.textContent = boxesNeeded;
        tilesPerBoxElement.textContent = tilesPerBox;
        boxesNeededRow.classList.remove('hidden');
      } else {
        boxesNeededRow.classList.add('hidden');
      }
      
      // عرض معلومات إضافية للنصائح
      document.getElementById('roomAreaTip').textContent = roomAreaSqm;
      document.getElementById('totalWithTileWastageTip').textContent = totalWithWastage;
      
      document.getElementById('tileResult').classList.remove('hidden');
      
      // تمرير تلقائي إلى النتائج
      document.getElementById('tileResult').scrollIntoView({ behavior: 'smooth' });
    }
    
    function showTileError(message) {
      const errorElement = document.getElementById('tileError');
      document.getElementById('tileErrorMessage').textContent = message;
      errorElement.classList.remove('hidden');
    }
    
    function resetTileForm() {
      document.getElementById('roomLength').value = '';
      document.getElementById('roomWidth').value = '';
      document.getElementById('tileType').value = 'ceramic';
      document.getElementById('tilePattern').value = 'straight';
      document.getElementById('tileWastage').value = '10';
      document.getElementById('tilePrice').value = '';
      document.getElementById('adhesivePrice').value = '';
      
      // إعادة تعيين حقول المقاس المخصص
      document.getElementById('customWidth').value = '';
      document.getElementById('customHeight').value = '';
      document.getElementById('customTilesPerBox').value = '';
      document.getElementById('customSizeFields').classList.add('hidden');
      
      // إخفاء صف العبوات وتكلفة اللاصق
      document.getElementById('boxesNeededRow').classList.add('hidden');
      document.getElementById('adhesiveCostRow').classList.add('hidden');
      
      document.getElementById('tileError').classList.add('hidden');
      document.getElementById('tileResult').classList.add('hidden');
      
      updateTileSizes();
    }
    
    function printTileResults() {
      window.print();
    }

    // تنفيذ تحديث أحجام البلاط عند تحميل الصفحة
    document.addEventListener('DOMContentLoaded', function() {
      updateTileSizes();
    });

    function calculateBricks() {
      // إخفاء النتائج ورسائل الخطأ السابقة
      document.getElementById('error').classList.add('hidden');
      document.getElementById('result').classList.add('hidden');
      
      // استلام المدخلات
      const wallLengthInput = document.getElementById('wallLength').value;
      const wallHeightInput = document.getElementById('wallHeight').value;
      const brickTypeId = document.getElementById('brickType').value;
      const wastagePercentage = parseInt(document.getElementById('wastage').value) || 10;
      const brickPrice = parseFloat(document.getElementById('brickPrice').value) || 0;
      const cementPrice = parseFloat(document.getElementById('cementPrice').value) || 0;
      
      // التحقق من المدخلات
      if (!wallLengthInput || !wallHeightInput) {
        showError('الرجاء إدخال طول وارتفاع الجدار');
        return;
      }
      
      const wallLength = parseFloat(wallLengthInput);
      const wallHeight = parseFloat(wallHeightInput);
      
      if (isNaN(wallLength) || isNaN(wallHeight) || wallLength <= 0 || wallHeight <= 0) {
        showError('الرجاء إدخال أرقام صحيحة موجبة للأبعاد');
        return;
      }
      
      // تحويل الأبعاد من متر إلى سنتيمتر
      const wallLengthCm = wallLength * 100;
      const wallHeightCm = wallHeight * 100;
      
      const brickType = BRICK_TYPES[brickTypeId];
      if (!brickType) {
        showError('نوع الطابوق غير صحيح');
        return;
      }
      
      const { dimensions, mortar } = brickType;
      
      // حساب أبعاد الطابوق مع المونة
      const effectiveLength = dimensions.length + mortar;
      const effectiveHeight = dimensions.height + mortar;
      
      // حساب عدد الطابوق
      const bricksPerRow = Math.ceil(wallLengthCm / effectiveLength);
      const rows = Math.ceil(wallHeightCm / effectiveHeight);
      const totalBricks = bricksPerRow * rows;
      
      // إضافة نسبة الهدر
      const totalWithWastage = Math.ceil(totalBricks * (1 + wastagePercentage / 100));
      
      // حساب مساحة الجدار
      const wallAreaSqm = (wallLength * wallHeight).toFixed(2);
      
      // حساب التكلفة إذا تم إدخال السعر
      const costRow = document.getElementById('costRow');
      if (brickPrice > 0) {
        const totalCost = (totalWithWastage * brickPrice).toFixed(2);
        document.getElementById('totalCost').textContent = totalCost + " درهم";
        costRow.classList.remove('hidden');
      } else {
        costRow.classList.add('hidden');
      }

      // حساب كمية الأسمنت والرمل
      const { cementBags, sandCubicMeters } = calculateMortarMaterials(parseFloat(wallAreaSqm), { name: brickTypeId });
      document.getElementById('cementBags').textContent = cementBags;
      document.getElementById('sandAmount').textContent = sandCubicMeters.toFixed(2);

      // حساب تكلفة الأسمنت إذا تم إدخال السعر
      const cementCostRow = document.getElementById('cementCostRow');
      if (cementPrice > 0) {
        const cementCost = (cementBags * cementPrice).toFixed(2);
        document.getElementById('cementCost').textContent = cementCost;
        cementCostRow.classList.remove('hidden');
      } else {
        cementCostRow.classList.add('hidden');
      }
      
      // عرض النتائج
      document.getElementById('wallArea').textContent = wallAreaSqm;
      document.getElementById('bricksPerRow').textContent = bricksPerRow;
      document.getElementById('rows').textContent = rows;
      document.getElementById('totalBricks').textContent = totalBricks;
      document.getElementById('wastageAmount').textContent = totalWithWastage - totalBricks;
      document.getElementById('wastagePercentage').textContent = wastagePercentage;
      document.getElementById('totalWithWastage').textContent = totalWithWastage;
      document.getElementById('bricksPerSqm').textContent = Math.round(totalBricks / wallAreaSqm);
      
      // عرض معلومات إضافية للنصائح
      document.getElementById('wallAreaTip').textContent = wallAreaSqm;
      document.getElementById('totalWithWastageTip').textContent = totalWithWastage;
      
      document.getElementById('result').classList.remove('hidden');
      
      // تمرير تلقائي إلى النتائج
      document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
    }
    
    function calculateMortarMaterials(wallAreaSqm, brickType) {
      // معدل استهلاك المونة لكل متر مربع (بالمتر المكعب)
      const mortarRate = {
        standard: 0.02,    // طابوق قياسي
        hollow: 0.025,     // طابوق مجوف
        concrete: 0.025,   // بلوك خرساني
        thermal: 0.02      // طابوق حراري
      };

      // حساب حجم المونة المطلوبة
      const mortarVolume = wallAreaSqm * mortarRate[brickType.name.split(' ')[0].toLowerCase()];
      
      // نسبة الأسمنت إلى الرمل (1:3)
      const cementRatio = 1;
      const sandRatio = 3;
      const totalRatio = cementRatio + sandRatio;
      
      // حساب كمية الرمل (بالمتر المكعب)
      const sandCubicMeters = (mortarVolume * sandRatio / totalRatio) * 1.2; // إضافة 20% للهدر
      
      // حساب كمية الأسمنت (بالكيس)
      // كيس الأسمنت = 50 كجم
      // كثافة الأسمنت = 1500 كجم/م³
      const cementCubicMeters = (mortarVolume * cementRatio / totalRatio) * 1.2; // إضافة 20% للهدر
      const cementKg = cementCubicMeters * 1500;
      const cementBags = Math.ceil(cementKg / 50);
      
      return {
        cementBags,
        sandCubicMeters
      };
    }

    function showError(message) {
      const errorElement = document.getElementById('error');
      document.getElementById('errorMessage').textContent = message;
      errorElement.classList.remove('hidden');
    }
    
    function resetForm() {
      document.getElementById('wallLength').value = '';
      document.getElementById('wallHeight').value = '';
      document.getElementById('brickType').value = 'standard';
      document.getElementById('wastage').value = '10';
      document.getElementById('brickPrice').value = '';
      document.getElementById('cementPrice').value = '';
      document.getElementById('error').classList.add('hidden');
      document.getElementById('result').classList.add('hidden');
    }
    
    function printResults() {
      window.print();
    }

    function calculateAdhesive(tileSize, area) {
      // معدل استهلاك اللاصق حسب حجم البلاط (كجم/م²)
      const adhesiveRates = {
        '30x30': 4,
        '40x40': 5,
        '60x60': 6,
        '80x80': 7
      };
      
      // تحديد معدل الاستهلاك بناءً على حجم البلاط
      let rate = 5; // معدل افتراضي
      if (tileSize.width <= 30) rate = 4;
      else if (tileSize.width <= 40) rate = 5;
      else if (tileSize.width <= 60) rate = 6;
      else rate = 7;
      
      // حساب كمية اللاصق بالكيلوجرام
      const adhesiveKg = area * rate;
      
      // تحويل الكمية إلى عدد الأكياس (وزن الكيس 20 كجم)
      return Math.ceil(adhesiveKg / 20);
    }

    function toggleAdhesivePriceField() {
      const showPriceField = document.getElementById('showAdhesivePriceField').checked;
      const adhesivePriceField = document.getElementById('adhesivePriceField');
      const adhesiveCostRow = document.getElementById('adhesiveCostRow');
      
      if (showPriceField) {
        adhesivePriceField.classList.remove('hidden');
      } else {
        adhesivePriceField.classList.add('hidden');
        document.getElementById('adhesivePrice').value = '';
        adhesiveCostRow.classList.add('hidden');
      }
      
      calculateTiles();
    }

    function updateAdhesiveCost() {
      const adhesivePrice = document.getElementById('adhesivePrice').value;
      const adhesiveBags = document.getElementById('adhesiveBags');
      const adhesiveCost = document.getElementById('adhesiveCost');
      const roomArea = parseFloat(document.getElementById('roomArea').textContent);
      
      if (adhesivePrice && !isNaN(roomArea)) {
        const bags = calculateAdhesive(getCurrentTileSize(), roomArea);
        adhesiveBags.textContent = bags;
        const adhesiveCostValue = parseFloat(adhesivePrice) * bags;
        adhesiveCost.textContent = adhesiveCostValue.toFixed(2);
      } else {
        adhesiveBags.textContent = "0";
        adhesiveCost.textContent = "0";
      }
    }

    function getCurrentTileSize() {
      const tileType = document.getElementById('tileType').value;
      const tileSizeId = document.getElementById('tileSize').value;
      
      if (tileSizeId === 'custom') {
        return {
          width: parseFloat(document.getElementById('customWidth').value),
          height: parseFloat(document.getElementById('customHeight').value)
        };
      } else {
        return TILE_TYPES[tileType].sizes[tileSizeId];
      }
    }
  </script>
</body>
</html> 